(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,n){e.exports=n(55)},38:function(e,t,n){},40:function(e,t,n){e.exports=n.p+"static/media/logo.06e73328.svg"},41:function(e,t,n){},50:function(e,t){},55:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),l=n(27),o=n.n(l),c=(n(38),n(5)),u=n(6),i=n(13),s=n(11),m=n(14),d=n(58),h=(n(40),n(41),function(e){var t=e.user;return r.a.createElement("tr",null,r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.username),r.a.createElement("td",null,t.first_name),r.a.createElement("td",null,t.last_name),r.a.createElement("td",null,t.email))}),p=function(e){var t=e.userapp;return r.a.createElement("table",null,r.a.createElement("th",null,"username"),r.a.createElement("th",null,"first_name"),r.a.createElement("th",null,"last_name"),r.a.createElement("th",null,"email"),t.map(function(e){return r.a.createElement(h,{user:e})}))},f=n(10),E=function(e){var t=e.project,n=e.deleteProject;return r.a.createElement("tr",null,r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.users),r.a.createElement("td",null,t.file_link),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return n(t.id)},type:"button"},"Delete")))},g=function(e){var t=e.projects,n=e.deleteProject;return r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("th",null,"name"),r.a.createElement("th",null,"users"),r.a.createElement("th",null,"file_link"),r.a.createElement("th",null),t.map(function(e){return r.a.createElement(E,{project:e,deleteProject:n})})),r.a.createElement(f.b,{to:"/projects/create"},"Create"))},v=function(e){var t=e.todo,n=e.deleteTodo;return r.a.createElement("tr",null,r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.project),r.a.createElement("td",null,t.text_todo),r.a.createElement("td",null,t.user_creator),r.a.createElement("td",null,t.date_create),r.a.createElement("td",null,t.date_update),r.a.createElement("td",null,t.closed),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return n(t.id)},type:"button"},"Delete")))},_=function(e){var t=e.todo,n=e.deleteTodo;return r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("th",null,"project"),r.a.createElement("th",null,"text_todo"),r.a.createElement("th",null,"user_creator"),r.a.createElement("th",null,"date_create"),r.a.createElement("th",null,"date_update"),r.a.createElement("th",null,"closed"),r.a.createElement("th",null),t.map(function(e){return r.a.createElement(v,{todo:e,deleteTodo:n})})),r.a.createElement(f.b,{to:"/todo/create"},"Create"))};n(50);function b(){return r.a.createElement("div",{class:"footer"},r.a.createElement("span",null,"\xa9 GB Todo"))}var k=function(e){e.location;return r.a.createElement("div",null,r.a.createElement("span",null,"\u0422\u0430\u043a\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442. ",r.a.createElement("a",{href:"/"},"\u0412\u0435\u0440\u043d\u0438\u0442\u0435\u0441\u044c \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443.")))},j=n(16),y=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={login:"",password:""},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.get_token(this.state.login,this.state.password),e.preventDefault()}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("input",{type:"text",name:"login",placeholder:"login",value:this.state.login,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{type:"submit",value:"Login"}))}}]),t}(r.a.Component),C=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={name:"",file_link:"",users:[]},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleUserChange",value:function(e){if(e.target.selectedOptions){for(var t=[],n=0;n<e.target.selectedOptions.length;n++)t.push(e.target.selectedOptions.item(n).value);this.setState({users:t})}else this.setState({users:[]})}},{key:"handleChange",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value)),console.log(e.target.name,e.target.value)}},{key:"handleSubmit",value:function(e){this.props.createProject(this.state.name,this.state.file_link,this.state.users),e.preventDefault()}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"login"},"name"),r.a.createElement("input",{type:"text",name:"name",placeholder:"name",value:this.state.name,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"file_link"},"file_link"),r.a.createElement("input",{type:"text",name:"file_link",placeholder:"file_link",value:this.state.file_link,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("select",{name:"users",multiple:!0,onChange:function(t){return e.handleUserChange(t)}},this.props.userapp.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.username)}),"//                    ",this.props.userapp.map(function(e){return r.a.createElement("option",{key:"".concat(e.id),value:"".concat(e.id)},"".concat(e.username))})),r.a.createElement("input",{type:"submit",value:"Save"}))}}]),t}(r.a.Component),O=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={project:0,text_todo:"",user_creator:0},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(j.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.createTodo(this.state.project,this.state.text_todo,this.state.user_creator),e.preventDefault()}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"login"},"project"),r.a.createElement("input",{type:"number",name:"project",placeholder:"project",value:this.state.project,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"text_todo"},"text_todo"),r.a.createElement("input",{type:"text",name:"text_todo",placeholder:"text_todo",value:this.state.text_todo,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"user_creator"},"user_creator"),r.a.createElement("input",{type:"number",name:"user_creator",placeholder:"user_creator",value:this.state.user_creator,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("input",{type:"submit",value:"Save"}))}}]),t}(r.a.Component),S=n(0),x=n(26),T=function(e){return"".concat("http://127.0.0.1:8000/api").concat(e)},w=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={userapp:[],projects:[],todo:[],token:""},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"set_token",value:function(e){var t=this;(new x.a).set("token",e),this.setState({token:e},function(){return t.load_data()})}},{key:"is_authenticated",value:function(){return""!=this.state.token}},{key:"logout",value:function(){this.set_token("")}},{key:"get_token_from_storage",value:function(){var e=this,t=(new x.a).get("token");this.setState({token:t},function(){return e.load_data()})}},{key:"get_token",value:function(e,t){var n=this;d.a.post("http://127.0.0.1:8000/api-token-auth/",{username:e,password:t}).then(function(e){n.set_token(e.data.token)}).catch(function(e){return alert("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c")})}},{key:"get_headers",value:function(){var e={"Content-Type":"application/json"};return this.is_authenticated()&&(e.Authorization="Token "+this.state.token),e}},{key:"createProject",value:function(e,t,n){var a=this;console.log(e,t,n);var r=this.get_headers(),l={name:e,file_link:t,users:n};console.log(l),d.a.post(T("/project/"),l,{headers:r}).then(function(e){a.load_data()}).catch(function(e){return console.log(e)}),console.log(e,t,n)}},{key:"createTodo",value:function(e,t,n){var a=this,r=this.get_headers(),l={project:e,text_todo:t,user_creator:n};d.a.post(T("/todo/"),l,{headers:r}).then(function(e){a.load_data()}).catch(function(e){return console.log(e)})}},{key:"deleteProject",value:function(e){var t=this,n=this.get_headers();d.a.delete(T("/project/".concat(e)),{headers:n}).then(function(e){t.load_data()}).catch(function(e){return console.log(e)})}},{key:"deleteTodo",value:function(e){var t=this,n=this.get_headers();d.a.delete(T("/todo/".concat(e)),{headers:n}).then(function(n){t.setState({todo:t.state.todo.filter(function(t){return t.id!==e})})}).catch(function(e){return console.log(e)})}},{key:"load_data",value:function(){var e=this,t=this.get_headers();d.a.get(T("/userapp"),{headers:t}).then(function(t){e.setState({userapp:t.data.results})}).catch(function(t){alert("\u041d\u0435 \u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c."),e.setState({userapp:[]})}),d.a.get(T("/project"),{headers:t}).then(function(t){e.setState({projects:t.data.results})}).catch(function(e){return console.log(e)}),d.a.get(T("/todo"),{headers:t}).then(function(t){e.setState({todo:t.data.results})}).catch(function(e){return console.log(e)})}},{key:"componentDidMount",value:function(){this.get_token_from_storage()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(f.a,null,r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("nav",{class:"top-menu"},r.a.createElement("a",{class:"navbar-logo",href:"#"},r.a.createElement("img",{src:"../logo.svg",alt:"\u042d\u0442\u043e\u0442 \u043b\u043e\u0433\u043e\u0442\u0438\u043f \u043d\u0435 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u043b\u0441\u044f"})),r.a.createElement("ul",{class:"menu-main"},r.a.createElement("li",null,r.a.createElement(f.b,{to:"/"},"Users")),r.a.createElement("li",null,r.a.createElement(f.b,{to:"/projects"},"Projects")),r.a.createElement("li",null,r.a.createElement(f.b,{to:"/todo"},"Todo")),r.a.createElement("li",null,this.is_authenticated()?r.a.createElement("button",{class:"menu-main",onClick:function(){return e.logout()}},"Logout"):r.a.createElement(f.b,{to:"/login"},"Login")))))),r.a.createElement("div",null,r.a.createElement(S.c,null,r.a.createElement(S.a,{exact:!0,path:"/",component:function(){return r.a.createElement(p,{userapp:e.state.userapp})}}),r.a.createElement(S.a,{exact:!0,path:"/projects/create",component:function(){return r.a.createElement(C,{userapp:e.state.userapp,createProject:function(t,n,a){return e.createProject(t,n,a)}})}}),r.a.createElement(S.a,{exact:!0,path:"/projects",component:function(){return r.a.createElement(g,{projects:e.state.projects,deleteProject:function(t){return e.deleteProject(t)}})}}),r.a.createElement(S.a,{exact:!0,path:"/todo/create",component:function(){return r.a.createElement(O,{createTodo:function(t,n,a){return e.createTodo(t,n,a)}})}}),r.a.createElement(S.a,{exact:!0,path:"/todo",component:function(){return r.a.createElement(_,{todo:e.state.todo,deleteTodo:function(t){return e.deleteTodo(t)}})}}),r.a.createElement(S.a,{exact:!0,path:"/login",component:function(){return r.a.createElement(y,{get_token:function(t,n){return e.get_token(t,n)}})}}),r.a.createElement(S.a,{component:k}))),r.a.createElement("div",null,r.a.createElement("footer",null,r.a.createElement(b,null)))))}}]),t}(r.a.Component),P=function(e){e&&e instanceof Function&&n.e(1).then(n.bind(null,57)).then(function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,l=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),l(e),o(e)})};o.a.createRoot(document.getElementById("root")).render(r.a.createElement(w,null)),P()}},[[29,3,2]]]);
//# sourceMappingURL=main.45c35710.chunk.js.map